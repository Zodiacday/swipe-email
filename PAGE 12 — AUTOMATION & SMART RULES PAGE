12. AUTOMATION & SMART RULES
Automation is the long‑term retention engine of the product.
It transforms the app from a daily swipe tool into a self‑maintaining inbox system.

This page defines:

Automation rule types

Trigger logic

Conditions

Safety constraints

AI‑generated suggestions

User control

Rule execution engine

Undo behavior

Provider‑specific behavior

UX for rule creation

Rule conflict resolution

Automation must be:

Safe

Transparent

Reversible

Predictable

User‑controlled

AI‑assisted

Never autonomous

12.1 Automation Philosophy
1. User always stays in control
No rule is ever auto‑enabled.
AI only suggests.

2. Safety > convenience
Rules must never delete important or personal emails.

3. Metadata‑only logic
Rules operate on metadata, not content.

4. Explainability
Every rule must show:

Why it was suggested

What it will do

How to undo it

5. Predictability
Rules must behave the same way every time.

6. Reversibility
Undo must restore:

Deleted emails

Blocked senders

Domain nukes

Rule state

12.2 Automation Rule Types
There are five primary rule types:

Rule Type 1 — Auto‑Delete
Automatically deletes emails that match:

Sender

Domain

Category (newsletter, promo, social)

Frequency pattern

AI spam score

Examples
“Auto‑delete all newsletters from @promo‑news.com”

“Auto‑delete all social updates”

“Auto‑delete all emails from senders you’ve deleted 10+ times”

Rule Type 2 — Auto‑Block
Automatically blocks:

Persistent spammers

Repetitive senders

High‑frequency offenders

Examples
“Auto‑block senders who send > 5 emails/day”

“Auto‑block senders you’ve blocked before”

Rule Type 3 — Auto‑Nuke Domain
Automatically nukes:

Spammy domains

Marketing platforms

Known offenders

Examples
“Auto‑nuke @spam‑offers.net”

“Auto‑nuke all domains with spam score > 0.9”

Rule Type 4 — Auto‑Archive / Auto‑Keep
Automatically keeps or archives:

Transactional emails

Receipts

Security alerts

Personal senders

Examples
“Always keep emails from your bank”

“Auto‑archive receipts after 30 days”

Rule Type 5 — Auto‑Unsubscribe Suggestions
AI suggests unsubscribes when:

User deletes 100% of a sender’s emails

Sender sends > 3 emails/week

Sender is known newsletter provider

Important:
AI never auto‑unsubscribes.
User must confirm.

12.3 Rule Structure
Each rule has:

Code
Rule {
  id
  user_id
  rule_type
  sender_id (optional)
  domain_id (optional)
  conditions: {
    frequency_threshold
    spam_score_threshold
    category
    time_window
  }
  is_enabled
  created_at
  updated_at
}
12.4 Trigger Logic
Rules are triggered when:

New email arrives

User performs a swipe action

AI detects a pattern

Daily cleanup session starts

Trigger Flow
Email arrives

Normalize metadata

Evaluate rules

If rule matches → queue action

Execute action

Log action

Provide undo token

12.5 Conditions
Rules can use any combination of:

1. Sender
Exact match

Pattern match

2. Domain
Exact domain

Subdomain match

3. Category
Newsletter

Promo

Social

Transactional

Personal

4. Frequency
Emails/day

Emails/week

Burst patterns

5. AI Scores
Spam score

Sender score

Domain score

6. Time Window
Last 7 days

Last 30 days

Always

12.6 Safety Constraints
1. Never auto‑delete transactional emails
Receipts, security alerts, order confirmations.

2. Never auto‑block personal senders
Humans are always safe.

3. Never auto‑nuke mixed‑purpose domains
Apple, Google, Amazon, banks, airlines.

4. Never auto‑unsubscribe
User must confirm.

5. Always allow undo
Undo restores:

Emails

Rules

Domain states

6. Rules must be explainable
No black‑box behavior.

12.7 AI‑Generated Rule Suggestions
AI suggests rules when patterns emerge.

Suggestion Triggers
User deletes 100% of emails from a sender

User blocks a sender twice

User unsubscribes from same domain multiple times

Sender sends > 5 emails/day

Domain spam score > 0.9

User deletes 20+ emails from same domain

Suggestion Format
Code
“Would you like to auto-delete emails from @promo-news.com?
You’ve deleted the last 14 emails from this sender.”
Suggestion UI
Card with sender/domain

Explanation

Toggle switch

“Enable rule” button

12.8 Rule Execution Engine
The Rule Engine runs:

On email arrival

On swipe

On schedule (every 15 minutes)

Execution Steps
Load rules

Evaluate conditions

If match → queue action

Execute action

Log

Generate undo token

Performance Requirements
Rule evaluation < 5ms

Batch execution < 50ms

Undo < 100ms

12.9 Rule Conflict Resolution
If multiple rules match:

Priority Order
Keep rules

Block rules

Delete rules

Domain nuke rules

AI suggestions

Example
If sender is both “auto‑delete” and “auto‑keep” → KEEP wins.

12.10 Rule Management UI
Rule List
Rule type

Sender/domain

Conditions

Toggle switch

Edit button

Delete button

Rule Creation
Simple form

Pre‑filled suggestions

Clear explanations

Rule Editing
Change conditions

Change scope

Change rule type

Rule Deletion
Confirmation modal

Undo available

12.11 Logging
Every rule execution logs:

Code
RuleExecutionLog {
  id
  rule_id
  user_id
  email_id
  action_type
  timestamp
  metadata
}
Logs power:

Undo

Insights

AI learning

Stats

12.12 Insights Powered by Automation
Automation generates insights such as:

“Auto‑deleted 87 emails this week”

“Blocked 12 persistent senders”

“You saved 14 minutes today”

“Your rules prevented 90% of spam”

These insights reinforce:

Trust

Value

Habit formation
